include: [base_teaser.yaml] #Loads default values for Teaser, including mappers, parameter sets, simulators, etc.

title: "Title for the benchmark"
description: "This benchmark tests bowtie2 and bwa for a Drosophila Illumina and Ion Torrent data set"

#The following section defines two simulated data sets. They will be created, and the mappers and parameter sets listed
#below will be subsequently evaluated for them.
teaser:
  tests:
    dros_ill:
       reference: D_melanogaster.fasta
       platform: illumina
       title: Drosophila Illumina
       paired: Yes
       read_length: 150

       mutation_rate: 0.1
       mutation_indel_frac: 0.5
       mutation_indel_avg_len: 2

       sampling:
          enable: Yes
          ratio: 0.01 #Overwrite the subsampling ratio to one percent of the genome size
       
    dros_ion:
       reference: D_melanogaster.fasta
       platform: ion_torrent
       paired: No
       read_length: 200
       error_rate_mult: 2


evaluation:
   pos_threshold: 10

#In this section, additional mappers are defined. For this example, we show how to add support for the Bowtie 1 mapper.
#Please refer to the Adding Mappers section in the Wiki for details on how to use the placeholder parameters for defining
#how mapper binaries are invoked by Teaser.
mappers:
  bowtie: #Internal ID of the mapper
    title: "Bowtie" #Displayed name of the mapper
    type: MapperGeneric
    bin: software/bowtie
    index_files:
      - (r)_bo.1.ebwt
      - (r)_bo.2.ebwt
      - (r)_bo.3.ebwt
      - (r)_bo.4.ebwt
      - (r)_bo.rev.1.ebwt
      - (r)_bo.rev.2.ebwt

    command_index: software/bowtie-build (r) (r)_bo
    command: (b) (x) -S (r)_bo (q) (o)
    command_multi_read_files: ''
    command_cleanup: ''
    param_paired: ''


#In this section, additional parameter sets can be defined.
parameters:
   bowtie2_presets: #Internal ID of the parameter set
      title: Presets #Displayed name of the parameter set
      mapper: bowtie2 #Internal ID of the mapper this parameter set is for.

      #In the 'define' subsection of a parameter set, Teaser expects a flat list of parameters which are then tested individually.
      define: 
        - "--very-fast"
        - "--fast"
        - "--sensitive"
        - "--very-sensitive"
        - "--very-fast-local"
        - "--fast-local"
        - "--sensitive-local"
        - "--very-sensitive-local"

   bowtie2_exhaustive:
      title: Exhaustive
      mapper: bowtie2

      #In the 'generate' subsection of a parameter set, Teaser expects a list of parameters (in this case -D, -R and -L) and
      #for each parameter again a list of values that should be tested.
      #In the end, Teaser will enumerate and evaluate the mapper for all possible combinations of parameter values.
      generate: 
        -
         - "-D 5"
         - "-D 15"
         - "-D 30"

        -
         - "-R 1"
         - "-R 5"
         - "-R 20"

        -
         - "-L 15"
         - "-L 20"
         - "-L 30"

#The local Teaser installation may include a large number of mappers and parameter sets.
#Since users might not want to always test every single mapper/parameter set on each data set,
#in this section the mappers and parameter sets that should be tested in the benchmark at hand
#can be defined separately.
test_mappers:
   - bowtie2
   - bwa

test_parameters:
   - bowtie2_presets

report:
   name: example_advanced #The report will be placed in Teaser/reports/example_advanced

#The following section controls the resources used by the mappers and evaluation.
threads: 3
sub_max_memory: 16000
sub_max_runtime: 3600

